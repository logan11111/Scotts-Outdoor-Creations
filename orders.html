<!DOCTYPE html>
<html>
    <head>
        <title> Scott's Outdoor Creations</title>
        <link href='https://fonts.googleapis.com/css?family=Grape Nuts' rel='stylesheet'>
        <link rel="stylesheet" href="orders.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    </head>
    <body>
        <!--popup once user wants to conffirm their order-->
            <div id="confirmationPopup" class="popup">
                <div class="popup-content">
                    <span class="close">&times;</span>
                    <h1 style="color: #E4C59E; font-family: 'Times New Roman';">Confirm Your Order</h1>
                    <h2 style="color: #E4C59E; font-family: 'Times New Roman';"> Order Details</h2>
                    <div id="popupOrderDetails" style="color: #AF8260; font-family: 'Times New Roman';"></div>
                    <h2 style="color: #E4C59E; font-family: 'Times New Roman';"> Contact Information</h2>
                    <p style="color: #E4C59E; font-family: 'Times New Roman';">
                        <strong>First Name:</strong> <span id="popupFirstName" style="color: #AF8260;"></span><br>
                        <strong>Last Name:</strong> <span id="popupLastName" style="color: #AF8260;"></span><br>
                        <strong>Phone Number:</strong> <span id="popupPhoneNumber" style="color: #AF8260;"></span><br>
                        <strong>Email:</strong> <span id="popupEmail" style="color: #AF8260;"></span><br>
                        <strong>Special Requests:</strong> <span id="popupSpecialRequests" style="color: #AF8260;"></span>
                    </p>
                    <h2 style="color: #E4C59E; font-family: 'Times New Roman';"> Order Total</h2>
                    <span id="priceTotalAll" style="color: #AF8260;"></span><br>
                    <p style="color: #E4C59E; font-family: 'Times New Roman';">Are you sure you want to place this order?</p>
                    <div class="popup-buttons">
                        <button id="confirmButton">Confirm</button>
                        <button id="cancelButton">Cancel</button>
                    </div>
                </div>
            </div>
        
        <!-- Item info popups -->
        <div id="overlay" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:999;"></div>
        <!--hidden item popups if user wants to view info on item-->
        <div class="itemInfo" id="item1">
        <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairFront.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairFront2.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairFront3.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/aChairFront4.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">FULL SIZE ADIRONDACK CHAIR</h2>
                <p class="itemDescriptionText">This chair has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                <p class="itemDescriptionText">Stock chairs made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Pick up only. If delivery is required, extra costs may apply. One year warranty.</p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item2">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/smallchairfront.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/smallchairback.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/smallchairside.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">SMALL ADIRONDACK CHAIR</h2>
                <p class="itemDescriptionText">This chair has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                <p class="itemDescriptionText">Stock chairs made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Pick up only. If delivery is required, extra costs may apply. One year warranty</p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item3">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairSetFront.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairSetSide.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairSetSide2.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/AchairSetSideFront2.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">ADIRONDACK CHAIR SET</h2>
                    <p class="itemDescriptionText">This chair has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                    <p class="itemDescriptionText">Stock chairs made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                    <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Pick up only. If delivery is required, extra costs may apply. One year warranty.</p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item4">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/planterFront - Copy.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/planterBack.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/planterSide.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">THREE TIER PLANTER</h2>
                <p class="itemDescriptionText">Handcrafted with Cedar and Pressure Treated wood, these three tier planters are built to last in our Alberta outdoor elements. Assembled, screwed and glued, these planters are built rock solid and made to enjoy for many years! </p>
                <p class="itemDescriptionText">Stock size planters are 3’ or 36” wide but will be built to suit your specific needs! I will also provide landscape fabric to use in the planter so you have everything you need to start your planter! Pick up only. If delivery is required, extra costs may apply.</p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item5">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/RockerSide.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/RockerSide2.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/RockerSide.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">ADIRONDACK ROCKER</h2>
                <p class="itemDescriptionText">This Adirondack Rocker has all the comfortability and design of the Adirondack chair but with rocking ability. This Rocker has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                <p class="itemDescriptionText">Stock Rockers made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Current price is $350 (Prices subject to change based on product costs) Pick up only. If delivery is required, extra costs may apply. One year warranty. </p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item6">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/coffeeTable1.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/coffeeTable2.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/coffeeTable3.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">COFFEE TABLE</h2>
                <p class="itemDescriptionText">This chair has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                <p class="itemDescriptionText">Stock chairs made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Pick up only. If delivery is required, extra costs may apply. One year warranty.</p>
            </div>  
           <span class="closeItem">&times;</span>
        </div>
        <div class="itemInfo" id="item7">
            <!-- Slider main container -->
            <div class="swiper">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/endTable1.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/endTable2.jpg">
                    </div>
                    <div class="swiper-slide" data-swiper-autoplay="3000">
                        <img class="infoPics" src="pictures/endTable1.jpg">
                    </div>
                </div>
            </div>
            <div class="itemDescription">
                <h2 class="itemDescriptionName">END TABLE</h2>
                <p class="itemDescriptionText">This chair has a unique curved back design for lower lumbar support and ultimate comfortability. </p>
                <p class="itemDescriptionText">Stock chairs made from locally sourced pine and meticulously prepared and assembled with all materials built to withstand our harsh Alberta climate. All pieces treated with Penofin penetrating oil prior to assembly for optimal coverage and protection. </p>
                <p class="itemDescriptionText">Estimated time frame from order to pick up is one week, depending on size of order and demand. Pick up only. If delivery is required, extra costs may apply. One year warranty.</p>
            </div>  
            <span class="closeItem">&times;</span>
        </div>

        <!--script for popping up item info-->
        <script>
        document.addEventListener('DOMContentLoaded', function () {
            document.querySelectorAll('.viewButton').forEach(button => {
                button.addEventListener('click', () => {
                    const target = document.getElementById(button.dataset.target);
                    target.classList.add('active');
                    document.getElementById('overlay').style.display = 'block';
                });
            });

            document.querySelectorAll('.closeItem').forEach(button => {
                button.addEventListener('click', () => {
                    button.closest('.itemInfo').classList.remove('active');
                    document.getElementById('overlay').style.display = 'none';

                });
            });
            document.addEventListener('click', (e) => {
            const popup = document.querySelector('.itemInfo.active');
            if (popup && !popup.contains(e.target) && !e.target.classList.contains('viewButton')) {
                popup.classList.remove('active');
                document.getElementById('overlay').style.display = 'none';

                }
            });  
        });
        </script>

        <!--intro to order page-->
        <div class="header">
            <h1 class="TitleOrder">ORDER</h1>
        </div>
        <div class="explanation">
            <p class="introParagraph"> Thank you for making the decision to order handcrafted outdoor furniture from Scotts Outdoor Creations! 
                Please fill in the form and information below and add as much (or little) detail as you would like, to give me the best opportunity to create exactly
                what you are looking for and to meet your outdoor furniture needs. All I ask is that you put down 50% of the total cost as a guarantee of commitment. This will be non-refundable if you change your mind or cancel the order, as the material is bought as orders are received.                 
            </p>
        </div>

        <!--all items available for order-->
        <hr style="border-color: #E4C59E;">

            <!--filter by type section-->
        <h2 class="filterTitle">Filter</h2>
        <div class="filterForm">  
            <div class="checkbox">
                <input type="checkbox" id="allCheckbox" checked >
                <label for="allCheckbox" class="checkboxLabel">All</label>
            </div>      
            <div class="checkbox">
                <input type="checkbox" id="seatingCheckbox">
                <label for="seatingCheckbox" class="checkboxLabel">Seating</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" id="tablesCheckbox">
                <label for="tablesCheckbox" class="checkboxLabel">Tables</label>
            </div>
            <div class="checkbox">
                <input type="checkbox" id="plantersCheckbox">
                <label for="plantersCheckbox" class="checkboxLabel">Planters</label>
            </div>
        </div>

        <div class="orderArea">
            <h2 class="selectionText">Select Item(s):</h2>
            <div class="selection">
                <div class="itemChoice">
                    <img class="pic" src="pictures/AchairFront.jpg">
                    <div class="description"> 
                        <a class="itemChoiceHeader">FULL SIZE ADIRONDACK CHAIR</a>
                        <a class="price">$350</a>
                        <button class="viewButton" id="viewButton1" data-target="item1">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/smallchairfront.jpg">
                    <div class="description">
                        <a class="itemChoiceHeader">SMALL ADIRONDACK CHAIR</a>
                        <a class="price">$300</a>
                        <button class="viewButton" data-target="item2">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/AchairSetFront.jpg">
                    <div class="description"> 
                        <a class="itemChoiceHeader">ADIRONDACK CHAIR SET</a>
                        <a class="price">$450</a>
                        <button class="viewButton" data-target="item3">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/planterFront.jpg">
                    <div class="description">
                        <a class="itemChoiceHeader">THREE TIER PLANTER</a>
                        <a class="price">$300</a>
                        <button class="viewButton" data-target="item4">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/RockerSide.jpg">
                    <div class="description">
                        <a class="itemChoiceHeader">ADIRONDACK ROCKER</a>
                        <a class="price">$400</a>
                        <button class="viewButton" data-target="item5">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/coffeeTable2.jpg">
                    <div class="description">
                        <a class="itemChoiceHeader">COFFEE TABLE</a>
                        <a class="price">$200</a>
                        <button class="viewButton" data-target="item6">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
                <div class="itemChoice">
                    <img class="pic" src="pictures/endTable2.jpg">
                    <div class="description">
                        <a class="itemChoiceHeader">END TABLE</a>
                        <a class="price">$150</a>
                        <button class="viewButton" data-target="item7">View item info</button>
                        <label for="quantities">Choose Quantity:</label>
                        <select name="quantities" id="quantities">     <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                        </select>
                    </div>
                </div>
            </div>
        </div>

        <hr style="border-color: #E4C59E;">

        <!--second info text-->
        </div>
        <div class="explanationTwo">
            <p class="introParagraphTwo"> 
            My guarantee to you is that I commit to creating the best product that I can and will warranty deficiencies in my work for one year from the date of pick up. 
            Timeframe from order to pick-up will depend on demand at the time and I will be transparent with you about timing from the start.  
            Payment options are: Etransfers,Cash or money orders only. No cheques will be accepted for payment.                  
            </p>
        </div>

        <!--formspree template to email Scott information-->
        <form id="orderForm" action="https://formspree.io/f/xvgpaevl" method="post">
            <div class="endingInfo">
                <div class="inputSelection">
                    <label class="selectionTextBottom">*First Name:</label>
                    <input type="text" name="firstName" class="inputText" placeholder="First Name" required>
                </div>
                <div class="inputSelection">
                    <label class="selectionTextBottom">*Last Name:</label>
                    <input type="text" name="lastName" class="inputText" placeholder="Last Name" required>
                </div>
                <div class="inputSelection">
                    <label class="selectionTextBottom">*Phone Number:</label>
                    <input type="tel" name="phoneNumber" class="inputText" placeholder="Phone Number" required pattern="[\d\s\-\(\)]{10,}" title="Please enter a valid phone number with at least 10 digits.">
                </div>
                <div class="inputSelection">
                    <label class="selectionTextBottom">*Email:</label>
                    <input type="email" name="email" class="inputText" placeholder="Email" required>
                </div>
                <div class="inputSelection">
                    <label class="selectionTextBottom">Special Requests:</label>
                    <textarea name="specialRequests" class="inputText" placeholder="Please be specific with any special requests, field not required"></textarea>
                </div>
            </div> 
            <!-- Hidden fields for order details and grand total -->
            <input type="hidden" id="hiddenOrderDetails" name="orderDetails">
            <input type="hidden" id="hiddenGrandTotal" name="grandTotal">
            <button type="submit" class="placeButton">Place Order! &#8658;</button>
        </form>
        <button class="homeButton" onclick="location.href='index.html'">&#8656; HOME</button>

        <!--all scripts-->

        <!--script for sliding images-->
        <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
        <script>
            const swipers = {}; // store swiper instances by target id

            document.querySelectorAll('.viewButton').forEach(button => {
                button.addEventListener('click', () => {
                    const targetId = button.getAttribute('data-target');
                    const swiperContainer = document.querySelector(`#${targetId} .swiper`);

                    if (!swiperContainer) {
                        console.error('Swiper container not found for:', targetId);
                        return;
                    }

                    swiperContainer.style.display = 'block'; // show container

                    setTimeout(() => {
                        if (!swipers[targetId]) {
                            swipers[targetId] = new Swiper(`#${targetId} .swiper`, {
                                direction: 'horizontal',
                                loop: true,
                                autoplay: {
                                    delay: 2000,
                                    disableOnInteraction: false,
                                    pauseOnMouseEnter: false,
                                },
                                pagination: {
                                    el: `#${targetId} .swiper-pagination`,
                                },
                                navigation: {
                                    nextEl: `#${targetId} .swiper-button-next`,
                                    prevEl: `#${targetId} .swiper-button-prev`,
                                },
                                slidesPerView: 1,
                            });
                        } else {
                            swipers[targetId].update();
                        }

                        if (swipers[targetId].autoplay && typeof swipers[targetId].autoplay.start === 'function') {
                            swipers[targetId].autoplay.start();
                        }
                    }, 100);
                });
            });
        </script>


        <!--script for the order-->
        <script>
            let orderDetails = ''; // Initialize at the beginning of the script
            let grandTotal = 0; // Initialize at the beginning of the script
            // Wait for the DOM to be fully loaded
            document.addEventListener('DOMContentLoaded', function () {

                // Select all quantity dropdowns
                const selects = document.querySelectorAll('select[name="quantities"]');

                selects.forEach((select) => {
                    select.addEventListener('change', function () {
                        const itemChoiceDiv = this.closest('.itemChoice');

                        // Add or remove the 'selected' class based on the selected value
                        if (this.value !== '0') {
                            itemChoiceDiv.classList.add('selected');
                        } else {
                            itemChoiceDiv.classList.remove('selected');
                        }
                    });
                });

                function validateSelection() {
                    let valid = false;
                    selects.forEach((select) => {
                        if (select.value !== '0') {
                            valid = true;
                        }
                    });
                    return valid;
                }

                const form = document.querySelector('#orderForm');
                const placeOrderButton = document.querySelector('.placeButton');
                const confirmationPopup = document.getElementById('confirmationPopup');
                const confirmButton = document.getElementById('confirmButton');
                const cancelButton = document.getElementById('cancelButton');
                const closeButton = document.querySelector('.close');

                placeOrderButton.addEventListener('click', function (event) {
                    event.preventDefault(); 
                    orderDetails = '';
                    grandTotal = 0;
                    
                    // Check if the form is valid
                    if (form.checkValidity() && validateSelection()) {
                        const firstName = form.querySelector('input[placeholder="First Name"]').value;
                        const lastName = form.querySelector('input[placeholder="Last Name"]').value;
                        const phoneNumber = form.querySelector('input[placeholder="Phone Number"]').value;
                        const email = form.querySelector('input[placeholder="Email"]').value;
                        const specialRequests = form.querySelector('textarea[placeholder="Please be specific with any special requests, field not required"]').value;

                        // Update popup content with form values
                        document.getElementById('popupFirstName').textContent = firstName;
                        document.getElementById('popupLastName').textContent = lastName;
                        document.getElementById('popupPhoneNumber').textContent = phoneNumber;
                        document.getElementById('popupEmail').textContent = email;
                        document.getElementById('popupSpecialRequests').textContent = specialRequests;

                        document.querySelectorAll('.itemChoice').forEach((itemChoice) => {
                            const itemName = itemChoice.querySelector('.itemChoiceHeader').textContent;
                            const quantity = itemChoice.querySelector('select[name="quantities"]').value;
                            const priceText = itemChoice.querySelector('.price').textContent;
                            const price = parseFloat(priceText.replace('$', ''));
                            if (quantity !== '0') {
                                const totalPrice = (price * quantity).toFixed(2); // Calculate total price
                                grandTotal += parseFloat(totalPrice);
                                orderDetails += `${itemName}x ${quantity} = $${totalPrice}\n`;
                            }
                        });
                        document.getElementById('popupOrderDetails').innerHTML = orderDetails;
                        document.getElementById('priceTotalAll').innerHTML = '$' + grandTotal;

                        // Update hidden fields
                        const hiddenOrderDetails = document.getElementById('hiddenOrderDetails');
                        const hiddenGrandTotal = document.getElementById('hiddenGrandTotal');
                        if (hiddenOrderDetails && hiddenGrandTotal) {
                            hiddenOrderDetails.value = orderDetails;
                            hiddenGrandTotal.value = grandTotal;
                        }

                        confirmationPopup.style.display = 'block'; // Show the popup if the form is valid
                    };
                    if(!validateSelection()) {
                            // If form is invalid, trigger validation messages
                            alert('Please select at least one item.');
                        }
                        if(!form.checkValidity()){
                            form.reportValidity();
                    }
                });

                confirmButton.addEventListener('click', function () {
                    confirmationPopup.style.display = 'none'; // Hide the popup
                    form.submit(); // Submit the form
                    
                });

                cancelButton.addEventListener('click', function () {
                    confirmationPopup.style.display = 'none'; // Hide the popup if canceled
                });

                closeButton.addEventListener('click', function () {
                    confirmationPopup.style.display = 'none'; // Hide the popup when clicking close
                });

                window.addEventListener('click', function (event) {
                    if (event.target === confirmationPopup) {
                        confirmationPopup.style.display = 'none'; // Hide the popup if clicked outside
                    }
                });
            });
        </script>
    </body>
</html>
